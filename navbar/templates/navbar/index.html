{% extends "tuisd/base.html" %}
{% load static %}

{% block head %}

{% endblock %}

{% block content %}
<div class="padded">
	<h1>Constructor de barra de navegación horizontal</h1>
</div>
<div class="row">
	<div class="col-lg-1">
</div>
    <div id="fb-editor" class="build-wrap"></div>
    <form id="fb-rendered-form" class="render-wrap"></form>
	<div class="col-lg-1">
		<select class="col-lg-1" name="navbarType" id="navbarType">
			<option value="fixed">Fixed</option>
			<option value="static">Static</option>
		</select>
	</div>
	<div class="col-lg-4">
		<label for="navbarType">Tipo de barra de navegación</label>
	</div>

</div>

<div class="row">
	<div class="col-lg-4">
		<label for="elementList">Agregar elemento:</label>
	</div>
	<div class="col-lg-4">
		<select name="elementList" id="elementList" onchange="showAddSection()">
			<option value="Navbar Brand">Navbar Brand</option>
			<option value="Link">Link</option>
			<option value="Dropdown">Dropdown</option>
		</select>
	</div>
</div>

<div class="row" id="addLinkSection" style="display: none">
	<div class="col-lg-12">
		<h2>Añadir un elemento</h2>
	</div>
	<div class="col-lg-12">
		<label for="linkName">Nombre del botón:</label>
		<input type="text" name="linkName" id="linkName"/>
	</div>
	<div class="col-lg-12">
		<label for="linkLink">Link del botón:</label>
		<input type="text" name="linkLink" id="linkLink"/>
	</div>
	<div class="col-lg-12">
		<label for="linkOption">Estado del botón:</label>
		<select name="linkOption" id="linkOption">
			<option value="active">Habilitado</option>
			<option value="disabled">Deshabilitado</option>
		</select>
	</div>
	<button onclick="addElement('link')">Añadir link</button>
</div>


<div class="row" id="addBrandSection" style="display: none">
	<div class="col-lg-12">
		<h2>Añadir un brand</h2>
	</div>
	<div class="col-lg-12">
		<label for="navbarBrandName">Nombre de la página:</label>
		<input type="text" name="navbarBrandName" id="navbarBrandName"/>
	</div>
	<div class="col-lg-12">
		<label for="navbarBrandLogo">Link del logo:</label>
		<input type="text" name="navbarBrandLogo" id="navbarBrandLogo"/>
	</div>
	<button onclick="addElement('brand')">Añadir brand</button>
</div>

<div class="row" id="addDropdownSection" style="display: none">
	<div class="col-lg-12">
		<h2>Añadir un Dropdown</h2>
	</div>
	<div class="col-lg-12">
		<label for="dropdownName">Nombre del menú desplegable:</label>
		<input type="text" name="dropdownName" id="dropdownName"/>
	</div>
	<div class="col-lg-12">
		<label for="dropdownItem1">Item:</label>
		<input type="text" name="dropdownItem1" id="dropdownItem1"/>
	</div>
	<div class="col-lg-12">
		<label for="dropdownItem1Link">Link:</label>
		<input type="text" name="dropdownItem1Link" id="dropdownItem1Link"/>
	</div>
	<button onclick="addElement('dropdown')">Añadir dropdown</button>
</div>



<form id = "generarCodigo" action="showCodigo/" method="POST" >
        {% csrf_token %}
        <input type="hidden" id="location" name="location" value="" />
        <input type="submit" />

</form>


{% endblock %}

{% block scripts %}

<script>
	var elements = [];

	function showAddSection() {
		// Obtiene el valor de la opción seleccionada
		var selectedOption = document.getElementById("elementList").value;

		// Muestra la sección correspondiente para crear el elemento a añadir y oculta 
		// las demás secciones que no corresponden con la opción actual
		switch(selectedOption) {
			case "Link":
				document.getElementById("addLinkSection").style.display = "block";
				document.getElementById("addBrandSection").style.display = "none";
				document.getElementById("addDropdownSection").style.display = "none";
				break;

			case "Navbar Brand":
				document.getElementById("addBrandSection").style.display = "block";
				document.getElementById("addLinkSection").style.display = "none";
				document.getElementById("addDropdownSection").style.display = "none";
				break;

			default:
				document.getElementById("addDropdownSection").style.display = "block";
				document.getElementById("addBrandSection").style.display = "none";
				document.getElementById("addLinkSection").style.display = "none";
				break;


		};
	}

	function addElement(element) {
		switch(element) {
			case "dropdown":

				var dropdownName      = document.getElementById("dropdownName").value;

				// Falta ampliar para mas elementos
				var dropdownItem1     = document.getElementById("dropdownItem1").value;
				var dropdownItem1Link = document.getElementById("dropdownItem1Link").value;
				var object = {type: "dropdown", name: dropdownName, elements:[{name: dropdownItem1,link: dropdownItem1Link}]}
				elements.push(object);

				alert("Añadido el elemento Dropdown");
				break
			case "link":
				var linkName = document.getElementById("linkName").value;
				var linkLink = document.getElementById("linkLink").value;
				var linkOption = document.getElementById("linkOption").value;
				var object = {type: "link", name: linkName, link: linkLink, option: linkOption}
				elements.push(object);
				alert("Añadido el elemento Link");
				break
			default:
				var brandName = document.getElementById("navbarBrandName").value;
				var brandImage = document.getElementById("navbarBrandLogo").value;
				var object = {type: "brand", name: brandName, link: brandImage}
				elements.push(object);
				alert("Añadido el elemento Brand");
				break
		};
		
		console.log(elements);
	};

	$(document).on('click', '#generarCodigo', function() {
		document.getElementById('location').value = JSON.stringify(elements);
	});

</script>



{% endblock %}